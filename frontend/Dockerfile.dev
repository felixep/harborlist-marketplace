# Development Dockerfile for Frontend
FROM node:18-alpine

# Set the working directory to the root workspace
WORKDIR /workspace

# Copy workspace configuration
COPY package*.json ./
COPY packages/shared-types/package*.json packages/shared-types/
COPY packages/shared-types/src packages/shared-types/src/
COPY packages/shared-types/tsconfig.json packages/shared-types/

# Copy frontend package files
COPY frontend/package*.json frontend/

# Install workspace dependencies from root
RUN npm ci

# Build shared types
WORKDIR /workspace/packages/shared-types
RUN npm run build

# Switch to frontend directory
WORKDIR /workspace/frontend

# Copy frontend source code
COPY frontend/ .

# Expose port
EXPOSE 3000

# Start development server
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "3000"]